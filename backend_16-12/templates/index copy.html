<!DOCTYPE html>
<html>
<head>
    <title>St√∏jm√•ling Dashboard</title>
    <style>
        body {
            background: #121212;
            color: white;
            font-family: Arial;
            text-align: center;
        }

        .card {
            margin: 20px auto;
            background: #1e1e1e;
            padding: 20px;
            width: 350px;
            border-radius: 10px;
            box-shadow: 0 0 10px #000;
        }

        button {
            margin: 10px;
            padding: 12px 20px;
            border: none;
            background: #3f51b5;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
        }

        .status-active {
            color: #4caf50;
            font-weight: bold;
        }

        .status-off {
            color: #f44336;
            font-weight: bold;
        }
    </style>
</head>
<body>

<h1>üîä St√∏jm√•ling Dashboard</h1>

<div class="card">
    <h2>M√•linger</h2>
    <p><b>dB:</b> <span id="db">--</span></p>
    <p><b>Hz:</b> <span id="hz">--</span></p>
</div>

<div class="card">
    <h2>Motor kontrol</h2>

    <button onclick="startServo()">Start Servomotor</button>
    <p>Servo status: <span id="servo_status" class="status-off">OFF</span></p>

    <button onclick="startStepper()">Start Steppermotor</button>
    <p>Stepper status: <span id="stepper_status" class="status-off">OFF</span></p>
</div>

<script>
function updateData() {
    fetch("/api/sensor")
        .then(res => res.json())
        .then(data => {
            document.getElementById("db").innerText = data.db;
            document.getElementById("hz").innerText = data.hz;

            document.getElementById("servo_status").innerText = data.servo ? "ACTIVE" : "OFF";
            document.getElementById("servo_status").className = data.servo ? "status-active" : "status-off";

            document.getElementById("stepper_status").innerText = data.stepper ? "ACTIVE" : "OFF";
            document.getElementById("stepper_status").className = data.stepper ? "status-active" : "status-off";
        });
}

function startServo() {
    fetch("/api/start_servo", {method: "POST"})
}
function startStepper() {
    fetch("/api/start_stepper", {method: "POST"})
}

// Opdater hvert sekund
setInterval(updateData, 1000);
updateData();
</script>

</body>
</html>
